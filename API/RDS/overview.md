# Cloud Database RDS


## Introduction
At present, RDS OpenAPI supports SQL Server service, which can realize database management, account management, backup management, Cloud on Single Database and other functions through OpenAPI, and will support cloud MySQL sevice later.


### Version
v1


## API
|Interface name|Request mehod|Function description|
|---|---|---|
|**createAccount**|POST|Create a database account. The user can use the client, application, etc. to log in to the RDS database instance through the account and password. <br>For ease of management and recovery, RDS restricts accounts. Database accounts can only be created, deleted, and authorized by the console or OpenAPI. Users cannot perform related operations on accounts through SQL statements.|
|**createAudit**|POST|It enables the database audit function of SQL Server and currently supports instance\-level database audit. Users can enable and disable the audit function, customize audit policies, and download audit files as needed. The audit file is a native SQL Server audit file and is saved for 6 months by default. <br>\- Support SQL Server Only|
|**createBackup**|POST|Creating a full backup of the RDS instance can be fully backed up for the entire instance or part of the database (SQL Server supports only). At the same time, there is only be one running backup task can work<br>\- Support SQL Server only|
|**createDatabase**|POST|Create a Database. For instance management and data restoration, RDS restricts user permissions, and users can only create databases through the console or this API.|
|**createInstanceByTime**|POST|Create a new instance based on the source instance backup, and recover the data of the new instance to the same status as the data at the specified time point of the source instance by adding new logs. <br>For example, creating an instance B at the time point '2018\-06\-18 23:00:00' based on instance A means creating an instance B, of which the data is exactly the same as the data of instance A at the time point '2018\-06\-18 23:00:00'. <br>For the SQL Server, recovery/creation by time point is not supported within 30 minutes after the primary/backup switchover. For example, if the user performs the primary/backup switchover at 10:05, recovery/creation by time point is unavailable during the time period from 10:05 to 10:35. <br>\- only support MySQL|
|**createInstanceFromBackup**|POST|Creates a new instance based on the full backup of the source instance. The data of the new instance is the same as the data status of the source instance when the backup is created. <br>For example, create a new instance B according to a full backup 'mybak' of source instance A. The backup is created in '2018\-8\-18 03:23:54'. Then the data status of the new instance B is consistent with the status of the instance A'2018\-8\-18 03:23:54'<br>\- only support MySQL|
|**deleteAccount**|DELETE|Delete the database account. After the account is deleted, it cannot be restored and the user cannot use this account to log in the RDS instance.|
|**deleteAudit**|DELETE|Disable Database Audit. After the database audit is disabled, the previously generated audit result files are not deleted immediately. The audit result files will be automatically deleted by the system after the expiration date. The default expiration time is 6 months<br>\- Support SQL Server Only|
|**deleteBackup**|DELETE|Deletes the RDS instance backup. Only the user\-generated backups are allowed to be deleted and the system automatic backups are not allow to be deleted.|
|**deleteDatabase**|DELETE|Delete the database from the RDS instance. For management and data restoration, RDS controls user permissions. Users can only delete databases through the console or this API.</br>Sensitive operation, enable<a href="https://docs.jdcloud.com/IAM/Operation\-Protection">MFA operation protection</a>|
|**describeAccounts**|GET|View all account information in an RDS instance, including the account name, access rights to each database, etc.|
|**describeAudit**|GET|View the audit options of the current instance that have been enabled. If no audit option is enabled for the current instance, it returns an empty array<br>\- Support SQL Server Only|
|**describeBackupDownloadURL**|GET|Obtain the download link of the entire backups or  a single file in the backup. <br>\- When there is a file name in the input parameter, obtain the download link of the file. <br>\- When there is no file name in the input parameter, obtain the download link of the entire backups. <br>Due to the difference of backup mechanism, when using this API to download backups, SQL Server must input the file name, and each file is downloaded one by one. It does not support downloading the entire backup. The file name (excluding the suffix) in the SQL Server backup is the database name of the backup. For example, the file name is my_test_db.bak, indicating that the file is a backup of the my_test_db database. <br>MySQL can download the entire backup set, but does not support the download of a single file. <br>\- Support SQL Server Only|
|**describeBackups**|GET|View the detailed information of all backups in the RDS instance. The returned backup list is sorted in descending order from start time of backup (backupStartTime). <br>\- Support SQL Server Only|
|**describeDatabases**|GET|Obtain a list of all database details for the current instance|
|**describeErrorLogs**|GET|Obtain error logs of SQL Server and download information<br>\- only support SQL Server|
|**describeImportFiles**|GET|Obtain the list of files uploaded by the user to the instance through Cloud on Single Database<br>\- only support SQL Server|
|**describeIndexPerformance**|POST|Obtain statistics on index performance based on user\-defined query conditions, and provide missing indexes and suggestions for index creation. Users can use these information to find index\-related performance bottlenecks and optimize them. <br>\- Support SQL Server Only|
|**describeQueryPerformance**|POST|Obtain the information of performance statistics of SQL execution, such as slow SQL, etc. based on user\-defined query conditions. Based on this information, users can find and optimize performance bottlenecks related to SQL execution. <br>\- Support SQL Server Only|
|**disableInternetAccess**|POST|Disable the internet access function of the RDS instance. After the disabling, users cannot access the RDS through the Internet, but can access the domain name through the intranet domain in JD Cloud|
|**enableInternetAccess**|POST|Enable the internet access function of the RDS instance. After enabling, users can access RDS instances through the internet|
|**getAuditDownloadURL**|POST|Obtain the download link of a certain audit file, support both the internal and external links which are valid for 24 hours <br>\- Support SQL Server Only|
|**getAuditFiles**|POST|Obtain the list of all audit result files under current instance<br>\- Support SQL Server Only|
|**getAuditOptions**|POST|Get the audit options and corresponding recommended options for the various database versions supported by the current system<br>\- Support SQL Server Only|
|**getUploadKey**|POST|Obtain the required key for uploading files from Cloud on Single Database. Cloud on Single Database needs the correct key value to connect to JD Cloud<br>\- only support SQL Server|
|**grantPrivilege**|POST|Grant the database access privilege to the account, i.e., the privilege the account has to the database. An account can have access to multiple databases. <br>For ease of management, RDS classifies the privileges. Currently, it provides the following two privileges<br>\- ro: Read\-only privilege, with which, the user can only read the data in the database, and cannot perform creation, insertion, deletion, change, etc. <br>\- rw: Read\-write privilege, with which, the user can perform addition, deletion, change and other operations on the database<br>\-Support SQL Server Only|
|**modifyAudit**|POST|Modify Current Audit Options. Currently available audit options are available through describeAudit, and all supported options are available through getAuditOptions. <br>\- Support SQL Server Only|
|**modifyInstanceSpec**|POST|Instance Expansion, Supports Upgrading the Instance CPU, Memory and Disk. Instance configuration downgrade not supported currently<br>\- only support MySQL|
|**resetPassword**|POST|Reset Database Account Password. If the user forgets the password of the account, he/she can use this API to reset the specified account password. After the password is reset, the previous password will not be available and you must log in or connect to the database instance with the new password after the reset.|
|**restoreDatabaseFromBackup**|POST|Restore the single database from backup, and support recovery from backups of other instances (but must be instances under the same account). For example, you can restore from a backup of a database instance in a production environment to a database in a test environment. <br>\- Support SQL Server Only|
|**restoreDatabaseFromFile**|POST|Restore a single database from the backup file uploaded by the user to the cloud through the Cloud on Single Database<br>\- only support SQL Server|
|**restoreDatabaseFromOSS**|POST|Restore a single database from the backup file uploaded to OSS<br> \- only support SQL Server|
|**restoreInstance**|POST|Restore and replace the current instance by using the full backup of the instance<br>\- only support MySQL|
|**revokePrivilege**|POST|Cancel all permissions of the account to a certain database. After the permissions are canceled, the account will not be able to access the database. Cancel the access permission of the account to a certain database without affecting the access permissions of the account to other databases<br>\- only support MySQL|
|**setImportFileShared**|POST|Set or cancel whether the uploaded file is shared to other instances under the same account. By default, files are only visible and can be imported on the uploaded instance. Other instances are not visible and cannot be imported. If you need this file to be imported on other instances, you can set this file to share<br>\- only support SQL Server|
